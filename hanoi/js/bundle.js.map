{"version":3,"sources":["webpack/bootstrap 1447acb2081052376f8e","./js/main.js","./js/hanoi-view.js","./js/game.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;;;;;;ACPD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA,kBAAiB,OAAO;AACxB,oBAAmB,OAAO;AAC1B;AACA,yBAAwB,EAAE,QAAQ,EAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,KAAK;AAChC;AACA;AACA;;;;AAIA;;;;;;;AC5EA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1447acb2081052376f8e\n **/","const HanoiView = require ('./hanoi-view.js');\nconst HanoiGame = require ('./game.js');\n\n$( () => {\n  const rootEl = $('.hanoi');\n  const game = new HanoiGame();\n  new HanoiView(game, rootEl);\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/main.js\n ** module id = 1\n ** module chunks = 0\n **/","var View = function (game, $el) {\n  this.$el = $el;\n  this.game = game;\n  this.setupTowers();\n  this.render();\n  this.clickTower();\n};\n\nView.prototype.setupTowers = function () {\n  let $tower1 = $(\"<ul></ul>\");\n  let $tower2 = $(\"<ul></ul>\");\n  let $tower3 = $(\"<ul></ul>\");\n  $tower1.addClass(\"x0\");\n  this.$el.append($tower1);\n  $tower2.addClass(\"x1\");\n  this.$el.append($tower2);\n  $tower3.addClass(\"x2\");\n  this.$el.append($tower3);\n  let $ring1 = $(\"<li><div></div></li>\");\n  let $ring2 = $(\"<li><div></div></li>\");\n  let $ring3 = $(\"<li><div></div></li>\");\n  $ring1.children().addClass(\"y2\");\n  this.$el.children().append($ring1);\n  $ring2.children().addClass(\"y1\");\n  this.$el.children().append($ring2);\n  $ring3.children().addClass(\"y0\");\n  this.$el.children().append($ring3);\n};\n\nView.prototype.clickTower = function () {\n  let pos = [];\n  let $towers = $(\"ul\");\n  $towers.on(\"click\", (event) => {\n    if (this.game.isWon()) return ;\n    let $tower = $(event.currentTarget);\n    if (pos.length === 2) pos = [];\n    let col = parseInt($tower.attr('class').slice(1));\n    pos.push(col);\n    $tower.css(\"border-bottom\",\"10px solid red\");\n    if (pos.length === 2) {\n      if (this.game.isValidMove(...pos)) {\n        this.game.move(...pos);\n        this.render();\n        if (this.game.isWon()) {\n          let $message = $(`<h1>you won!</h1>`);\n          this.$el.css(\"text-align\", \"center\");\n          $('body').append($message);\n        }\n      }\n      else {\n        alert (\"Invalid move\");\n      }\n      $towers.removeAttr('style');\n    }\n  });\n};\n\nView.prototype.render = function () {\n  for (var i = 0; i < 3; i++) {\n    for (var j = 0; j < 3; j++) {\n      let val = this.game.towers[i][j];\n      let ring = `ul.x${i} div.y${j}`;\n      let $ring = $(ring);\n      if (val === undefined) {\n        $ring.hide();\n        continue;\n      }\n      $ring.show();\n      let size = 75 * val;\n      $ring.css(\"width\",`${size}px`);\n    }\n  }\n};\n\n\n\nmodule.exports = View;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/hanoi-view.js\n ** module id = 2\n ** module chunks = 0\n **/","class Game {\n  constructor() {\n    this.towers = [[3, 2,1], [], []];\n  }\n\n  isValidMove(startTowerIdx, endTowerIdx) {\n      const startTower = this.towers[startTowerIdx];\n      const endTower = this.towers[endTowerIdx];\n\n      if (startTower.length === 0) {\n        return false;\n      } else if (endTower.length == 0) {\n        return true;\n      } else {\n        const topStartDisc = startTower[startTower.length - 1];\n        const topEndDisc = endTower[endTower.length - 1];\n        return topStartDisc < topEndDisc;\n      }\n  }\n\n  isWon() {\n      // move all the discs to the last or second tower\n      return (this.towers[2].length == 3) || (this.towers[1].length == 3);\n  }\n\n  move(startTowerIdx, endTowerIdx) {\n      if (this.isValidMove(startTowerIdx, endTowerIdx)) {\n        this.towers[endTowerIdx].push(this.towers[startTowerIdx].pop());\n        return true;\n      } else {\n        return false;\n      }\n  }\n\n  print() {\n      console.log(JSON.stringify(this.towers));\n  }\n\n  promptMove(reader, callback) {\n      this.print();\n      reader.question(\"Enter a starting tower: \", start => {\n        const startTowerIdx = parseInt(start);\n        reader.question(\"Enter an ending tower: \", end => {\n          const endTowerIdx = parseInt(end);\n          callback(startTowerIdx, endTowerIdx)\n        });\n      });\n  }\n\n  run(reader, gameCompletionCallback) {\n      this.promptMove(reader, (startTowerIdx, endTowerIdx) => {\n        if (!this.move(startTowerIdx, endTowerIdx)) {\n          console.log(\"Invalid move!\");\n        }\n\n        if (!this.isWon()) {\n          // Continue to play!\n          this.run(reader, gameCompletionCallback);\n        } else {\n          this.print();\n          console.log(\"You win!\");\n          gameCompletionCallback();\n        }\n      });\n  }\n}\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/game.js\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}